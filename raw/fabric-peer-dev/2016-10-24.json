[
    {
        "type": "message",
        "user": "U0ULK2JPP",
        "text": "<@U2BF87970> is this with latest master ?",
        "ts": "1477311298.000545"
    },
    {
        "type": "message",
        "user": "U0ULK2JPP",
        "text": "<@U2BF87970> never mind.. I see you have made progress based on the discussion in `general`",
        "ts": "1477311420.000546"
    },
    {
        "type": "message",
        "user": "U0UKTPMG8",
        "text": "rebasing on master and pushing boostrap BDD updates",
        "ts": "1477317951.000547"
    },
    {
        "type": "message",
        "user": "U0KM61BCP",
        "text": "<@U0UKTPMG8>: this the go bdd?",
        "ts": "1477322536.000548"
    },
    {
        "type": "message",
        "user": "U0UKTPMG8",
        "text": "<@U0KM61BCP> it is the bootstrap feature file with partial python impl.  And a reworking of go BDD for extension.",
        "ts": "1477322946.000549"
    },
    {
        "type": "message",
        "user": "U0UKTPMG8",
        "text": "<@U0KM61BCP> this push may be delayed as I am now working on master and see it has a few issues :slightly_smiling_face:",
        "ts": "1477324189.000550"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "peer folks- is there a way to make a unit test that runs a peer (in-go-test-process and not externally) that's initialized with security, but without needing to create the corresponding files viper wants to exist?",
        "ts": "1477331503.000551"
    },
    {
        "type": "message",
        "user": "U0ULK2JPP",
        "text": "yes",
        "ts": "1477332740.000552"
    },
    {
        "type": "message",
        "user": "U0ULK2JPP",
        "text": "you can set the properties you want without need for a yaml file",
        "ts": "1477332760.000553"
    },
    {
        "type": "message",
        "subtype": "file_share",
        "text": "<@U0ULK2JPP|muralisr> uploaded a file: <https:\/\/hyperledgerproject.slack.com\/files\/muralisr\/F2TFP9LAW\/pasted_image_at_2016_10_24_02_13_pm.png|Pasted image at 2016-10-24, 2:13 PM> and commented: <@U0ZJZBJLF>",
        "file": {
            "id": "F2TFP9LAW",
            "created": 1477332794,
            "timestamp": 1477332794,
            "name": "Pasted image at 2016_10_24 02_13 PM.png",
            "title": "Pasted image at 2016-10-24, 2:13 PM",
            "mimetype": "image\/png",
            "filetype": "png",
            "pretty_type": "PNG",
            "user": "U0ULK2JPP",
            "editable": false,
            "size": 24579,
            "mode": "hosted",
            "is_external": false,
            "external_type": "",
            "is_public": true,
            "public_url_shared": false,
            "display_as_bot": false,
            "username": "",
            "url_private": "https:\/\/files.slack.com\/files-pri\/T0J024XGA-F2TFP9LAW\/pasted_image_at_2016_10_24_02_13_pm.png?t=xoxe-18002167554-139099126023-137701436192-e599afc92e",
            "url_private_download": "https:\/\/files.slack.com\/files-pri\/T0J024XGA-F2TFP9LAW\/download\/pasted_image_at_2016_10_24_02_13_pm.png?t=xoxe-18002167554-139099126023-137701436192-e599afc92e",
            "thumb_64": "https:\/\/files.slack.com\/files-tmb\/T0J024XGA-F2TFP9LAW-9bca2c0fa5\/pasted_image_at_2016_10_24_02_13_pm_64.png?t=xoxe-18002167554-139099126023-137701436192-e599afc92e",
            "thumb_80": "https:\/\/files.slack.com\/files-tmb\/T0J024XGA-F2TFP9LAW-9bca2c0fa5\/pasted_image_at_2016_10_24_02_13_pm_80.png?t=xoxe-18002167554-139099126023-137701436192-e599afc92e",
            "thumb_360": "https:\/\/files.slack.com\/files-tmb\/T0J024XGA-F2TFP9LAW-9bca2c0fa5\/pasted_image_at_2016_10_24_02_13_pm_360.png?t=xoxe-18002167554-139099126023-137701436192-e599afc92e",
            "thumb_360_w": 360,
            "thumb_360_h": 69,
            "thumb_480": "https:\/\/files.slack.com\/files-tmb\/T0J024XGA-F2TFP9LAW-9bca2c0fa5\/pasted_image_at_2016_10_24_02_13_pm_480.png?t=xoxe-18002167554-139099126023-137701436192-e599afc92e",
            "thumb_480_w": 480,
            "thumb_480_h": 93,
            "thumb_160": "https:\/\/files.slack.com\/files-tmb\/T0J024XGA-F2TFP9LAW-9bca2c0fa5\/pasted_image_at_2016_10_24_02_13_pm_160.png?t=xoxe-18002167554-139099126023-137701436192-e599afc92e",
            "thumb_720": "https:\/\/files.slack.com\/files-tmb\/T0J024XGA-F2TFP9LAW-9bca2c0fa5\/pasted_image_at_2016_10_24_02_13_pm_720.png?t=xoxe-18002167554-139099126023-137701436192-e599afc92e",
            "thumb_720_w": 720,
            "thumb_720_h": 139,
            "image_exif_rotation": 1,
            "original_w": 768,
            "original_h": 148,
            "permalink": "https:\/\/hyperledgerproject.slack.com\/files\/muralisr\/F2TFP9LAW\/pasted_image_at_2016_10_24_02_13_pm.png",
            "permalink_public": "https:\/\/slack-files.com\/T0J024XGA-F2TFP9LAW-e86b0191af",
            "channels": [
                "C27E2LGJY"
            ],
            "groups": [],
            "ims": [],
            "comments_count": 1,
            "initial_comment": {
                "id": "Fc2TFCMD6H",
                "created": 1477332794,
                "timestamp": 1477332794,
                "user": "U0ULK2JPP",
                "is_intro": true,
                "comment": "<@U0ZJZBJLF>",
                "channel": ""
            }
        },
        "user": "U0ULK2JPP",
        "upload": true,
        "display_as_bot": false,
        "username": "<@U0ULK2JPP|muralisr>",
        "bot_id": null,
        "ts": "1477332797.000554"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "Lol what about the certs? <@U0ULK2JPP> . \nHow do I set the certs without files?",
        "edited": {
            "user": "U0ZJZBJLF",
            "ts": "1477338000.000000"
        },
        "ts": "1477333109.000555"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "Pem key files",
        "ts": "1477333140.000557"
    },
    {
        "type": "message",
        "user": "U2BGFAHC7",
        "text": "Hi, continuing a private conversation with <@U0ZJZBJLF>, it seems like I might be running into some issues with setting `CORE_PEER_DISCOVERY_ROOTNODE` using hostnames rather than ip addresses. Kubernetes depends on DNS for peer discovery when using petsets, as ip addresses cannot be known ahead of deployment. It seems like all the docker compose examples use hard-coded ip addresses. I\u2019m not sure this code supports what I\u2019m doing:\n<https:\/\/github.com\/hyperledger\/fabric\/blob\/v0.6\/core\/peer\/peer.go#L549-L570>\nBelow is my kubernetes config for reference:",
        "edited": {
            "user": "U2BGFAHC7",
            "ts": "1477337213.000000"
        },
        "ts": "1477337068.000560"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "can you please move that into a snippet?",
        "ts": "1477337142.000563"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "and for ease of debugging\/development I have here a docker-compose file I can share that uses hostnames instead of ip addresses:",
        "ts": "1477337177.000564"
    },
    {
        "type": "message",
        "subtype": "file_share",
        "text": "<@U0ZJZBJLF|yacovm> uploaded a file: <https:\/\/hyperledgerproject.slack.com\/files\/yacovm\/F2TG9FYMS\/-.yaml|Untitled>",
        "file": {
            "id": "F2TG9FYMS",
            "created": 1477337192,
            "timestamp": 1477337192,
            "name": "-.yaml",
            "title": "Untitled",
            "mimetype": "text\/plain",
            "filetype": "yaml",
            "pretty_type": "YAML",
            "user": "U0ZJZBJLF",
            "editable": true,
            "size": 1832,
            "mode": "snippet",
            "is_external": false,
            "external_type": "",
            "is_public": true,
            "public_url_shared": false,
            "display_as_bot": false,
            "username": "",
            "url_private": "https:\/\/files.slack.com\/files-pri\/T0J024XGA-F2TG9FYMS\/-.yaml?t=xoxe-18002167554-139099126023-137701436192-e599afc92e",
            "url_private_download": "https:\/\/files.slack.com\/files-pri\/T0J024XGA-F2TG9FYMS\/download\/-.yaml?t=xoxe-18002167554-139099126023-137701436192-e599afc92e",
            "permalink": "https:\/\/hyperledgerproject.slack.com\/files\/yacovm\/F2TG9FYMS\/-.yaml",
            "permalink_public": "https:\/\/slack-files.com\/T0J024XGA-F2TG9FYMS-4141d3e870",
            "edit_link": "https:\/\/hyperledgerproject.slack.com\/files\/yacovm\/F2TG9FYMS\/-.yaml\/edit",
            "preview": "vp0:\r\n  image: hyperledger\/fabric-peer\r\n  environment:\r\n    - CORE_PEER_VALIDATOR_CONSENSUS_PLUGIN=pbft\r\n    - CORE_PEER_ADDRESSAUTODETECT=true\r",
            "preview_highlight": "<div class=\"CodeMirror cm-s-default CodeMirrorServer\" oncopy=\"if(event.clipboardData){event.clipboardData.setData('text\/plain',window.getSelection().toString().replace(\/\\u200b\/g,''));event.preventDefault();event.stopPropagation();}\">\n<div class=\"CodeMirror-code\">\n<div><pre><span class=\"cm-atom\">vp0<\/span><span class=\"cm-meta\">:<\/span><\/pre><\/div>\n<div><pre><span class=\"cm-atom\">  image<\/span><span class=\"cm-meta\">: <\/span>hyperledger\/fabric-peer<\/pre><\/div>\n<div><pre><span class=\"cm-atom\">  environment<\/span><span class=\"cm-meta\">:<\/span><\/pre><\/div>\n<div><pre><span class=\"cm-meta\">    - <\/span>CORE_PEER_VALIDATOR_CONSENSUS_PLUGIN=pbft<\/pre><\/div>\n<div><pre><span class=\"cm-meta\">    - <\/span>CORE_PEER_ADDRESSAUTODETECT=true<\/pre><\/div>\n<\/div>\n<\/div>\n",
            "lines": 67,
            "lines_more": 62,
            "preview_is_truncated": true,
            "channels": [
                "C27E2LGJY"
            ],
            "groups": [],
            "ims": [],
            "comments_count": 0
        },
        "user": "U0ZJZBJLF",
        "upload": true,
        "display_as_bot": false,
        "username": "<@U0ZJZBJLF|yacovm>",
        "bot_id": null,
        "ts": "1477337192.000565"
    },
    {
        "type": "message",
        "subtype": "file_share",
        "text": "<@U2BGFAHC7|donovanhide> uploaded a file: <https:\/\/hyperledgerproject.slack.com\/files\/donovanhide\/F2TEWBN1H\/-.yaml|Untitled>",
        "file": {
            "id": "F2TEWBN1H",
            "created": 1477337228,
            "timestamp": 1477337228,
            "name": "-.yaml",
            "title": "Untitled",
            "mimetype": "text\/plain",
            "filetype": "yaml",
            "pretty_type": "YAML",
            "user": "U2BGFAHC7",
            "editable": true,
            "size": 1634,
            "mode": "snippet",
            "is_external": false,
            "external_type": "",
            "is_public": true,
            "public_url_shared": false,
            "display_as_bot": false,
            "username": "",
            "url_private": "https:\/\/files.slack.com\/files-pri\/T0J024XGA-F2TEWBN1H\/-.yaml?t=xoxe-18002167554-139099126023-137701436192-e599afc92e",
            "url_private_download": "https:\/\/files.slack.com\/files-pri\/T0J024XGA-F2TEWBN1H\/download\/-.yaml?t=xoxe-18002167554-139099126023-137701436192-e599afc92e",
            "permalink": "https:\/\/hyperledgerproject.slack.com\/files\/donovanhide\/F2TEWBN1H\/-.yaml",
            "permalink_public": "https:\/\/slack-files.com\/T0J024XGA-F2TEWBN1H-1c6f0c3d71",
            "edit_link": "https:\/\/hyperledgerproject.slack.com\/files\/donovanhide\/F2TEWBN1H\/-.yaml\/edit",
            "preview": "# A headless service to create DNS records\r\napiVersion: v1\r\nkind: Service\r\nmetadata:\r\n  name: peer\r",
            "preview_highlight": "<div class=\"CodeMirror cm-s-default CodeMirrorServer\" oncopy=\"if(event.clipboardData){event.clipboardData.setData('text\/plain',window.getSelection().toString().replace(\/\\u200b\/g,''));event.preventDefault();event.stopPropagation();}\">\n<div class=\"CodeMirror-code\">\n<div><pre><span class=\"cm-comment\"># A headless service to create DNS records<\/span><\/pre><\/div>\n<div><pre><span class=\"cm-atom\">apiVersion<\/span><span class=\"cm-meta\">: <\/span>v1<\/pre><\/div>\n<div><pre><span class=\"cm-atom\">kind<\/span><span class=\"cm-meta\">: <\/span>Service<\/pre><\/div>\n<div><pre><span class=\"cm-atom\">metadata<\/span><span class=\"cm-meta\">:<\/span><\/pre><\/div>\n<div><pre><span class=\"cm-atom\">  name<\/span><span class=\"cm-meta\">: <\/span>peer<\/pre><\/div>\n<\/div>\n<\/div>\n",
            "lines": 69,
            "lines_more": 64,
            "preview_is_truncated": true,
            "channels": [
                "C27E2LGJY"
            ],
            "groups": [],
            "ims": [],
            "comments_count": 0
        },
        "user": "U2BGFAHC7",
        "upload": true,
        "display_as_bot": false,
        "username": "<@U2BGFAHC7|donovanhide>",
        "bot_id": null,
        "ts": "1477337229.000567"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "docker-compose outputs: \n```\nvp1_1 | 19:27:05.624 [peer] handleChat -&gt; ERRO 1f3a Error handling message: Peer FSM cannot handle message (DISC_GET_PEERS) with payload size (0) while in state: created\n```\nWhich is weird, because vp1 isn't the root peer. it looks like the FSM hasn't processed the hello message that moves the handler to from `created` to `established`",
        "ts": "1477337345.000568"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "<@U0UKTPMG8>  I believe this is your area of expertise, have you ever encountered this error before?",
        "ts": "1477337395.000569"
    },
    {
        "type": "message",
        "user": "U0UKTPMG8",
        "text": "think so.  There is an issue with peers failing on init where the do not tear down the conn",
        "ts": "1477337440.000570"
    },
    {
        "type": "message",
        "user": "U0UKTPMG8",
        "text": "generally a restart will remediaate",
        "ts": "1477337469.000571"
    },
    {
        "type": "message",
        "user": "U2BGFAHC7",
        "text": "<@U0UKTPMG8> Is the use of hostnames ok for `CORE_PEER_DISCOVERY_ROOTNODE`?",
        "ts": "1477337500.000572"
    },
    {
        "type": "message",
        "user": "U0UKTPMG8",
        "text": "it can be easily remedied.... Planned to rework",
        "ts": "1477337510.000573"
    },
    {
        "type": "message",
        "user": "U0UKTPMG8",
        "text": "<@U2BGFAHC7> yes",
        "ts": "1477337522.000574"
    },
    {
        "type": "message",
        "user": "U0UKTPMG8",
        "text": "that is how the docker-compose systeem works today",
        "ts": "1477337532.000575"
    },
    {
        "type": "message",
        "user": "U2BGFAHC7",
        "text": "I see that now, looking at some more examples\u2026 Well, something with my config is causing errors like this on my peer-0 node:\n```[31m13:05:24.838 [peer] handleChat -&gt; ERRO[0m Error handling message: Peer FSM failed while handling message (DISC_HELLO): current state: created, error: transition canceled with error: Error registering Handler: Duplicate Handler error: {name:\"peer-0\"  10.0.1.48:7051 VALIDATOR }\n[31m13:05:29.838 [peer] handleChat -&gt; ERRO[0m Error handling message: Peer FSM cannot handle message (DISC_GET_PEERS) with payload size (0) while in state: created\n[31m13:05:34.838 [peer] handleChat -&gt; ERRO[0m Error handling message: Peer FSM cannot handle message (DISC_GET_PEERS) with payload size (0) while in state: created\n[31m13:05:39.838 [peer] handleChat -&gt; ERRO[0m Error handling message: Peer FSM cannot handle message (DISC_GET_PEERS) with payload size (0) while in state: created\n[31m13:05:44.838 [peer] handleChat -&gt; ERRO[0m Error handling message: Peer FSM cannot handle message (DISC_GET_PEERS) with payload size (0) while in state: created\n[31m13:05:49.838 [peer] handleChat -&gt; ERRO[0m Error handling message: Peer FSM cannot handle message (DISC_GET_PEERS) with payload size (0) while in state: created\n[31m13:05:54.838 [peer] handleChat -&gt; ERRO[0m Error handling message: Peer FSM cannot handle message (DISC_GET_PEERS) with payload size (0) while in state: created\n[31m13:05:59.838 [peer] handleChat -&gt; ERRO[0m Error handling message: Peer FSM cannot handle message (DISC_GET_PEERS) with payload size (0) while in state: created\n[31m13:06:04.838 [peer] handleChat -&gt; ERRO[0m Error handling message: Peer FSM cannot handle message (DISC_GET_PEERS) with payload size (0) while in state: created```",
        "ts": "1477337632.000576"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "Jeff, we have this line here:\n<https:\/\/github.com\/hyperledger\/fabric\/blob\/master\/core\/peer\/peer.go#L556>\nIs it possible that it's comparing a hostname to an ip address in case of donovan's use case?",
        "attachments": [
            {
                "service_name": "GitHub",
                "title": "hyperledger\/fabric",
                "title_link": "https:\/\/github.com\/hyperledger\/fabric\/blob\/master\/core\/peer\/peer.go#L556",
                "text": "Read-only mirror of <https:\/\/gerrit.hyperledger.org\/r\/#\/admin\/projects\/fabric>",
                "fallback": "GitHub: hyperledger\/fabric",
                "thumb_url": "https:\/\/avatars3.githubusercontent.com\/u\/7657900?v=3&s=400",
                "from_url": "https:\/\/github.com\/hyperledger\/fabric\/blob\/master\/core\/peer\/peer.go#L556",
                "thumb_width": 142,
                "thumb_height": 142,
                "service_icon": "https:\/\/github.com\/apple-touch-icon.png",
                "id": 1
            }
        ],
        "ts": "1477337666.000577"
    },
    {
        "type": "message",
        "user": "U0UKTPMG8",
        "text": "there are several settings that can be used to change what is sent in the hello message",
        "ts": "1477337752.000579"
    },
    {
        "type": "message",
        "user": "U0UKTPMG8",
        "text": "this allows binding of the host to differ from the published address",
        "ts": "1477337784.000580"
    },
    {
        "type": "message",
        "user": "U0UKTPMG8",
        "text": "for BMX",
        "ts": "1477337789.000581"
    },
    {
        "type": "message",
        "user": "U0UKTPMG8",
        "text": "more than likely there was a weird timing issue where the peers tried to discover each other and one did not fail the connection., It may still send hello's but the other is in a non-valid state",
        "ts": "1477337847.000582"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "is possible to spawn them with an interval, <@U2BGFAHC7>  ?",
        "ts": "1477337880.000583"
    },
    {
        "type": "message",
        "user": "U2BGFAHC7",
        "text": "Well, the idea with petsets is that you supply an identical configuration to all \u201cpods\u201d so you can easily scale up the numbers, which is the intention of this test. Without duplicating those configs, there is no easy way to insert a differing time, other than somehow generating a random number in bash.",
        "ts": "1477337990.000584"
    },
    {
        "type": "message",
        "user": "U2BGFAHC7",
        "text": "This does sound like a bug though.",
        "ts": "1477337999.000585"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "can you try something though?",
        "ts": "1477338105.000587"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "add all of them as the root nodes",
        "ts": "1477338113.000588"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "append their hostnames to the rootnode config separated with commas and see what happens",
        "ts": "1477338134.000589"
    },
    {
        "type": "message",
        "user": "U2BGFAHC7",
        "text": "A further suggestion is that comparing either ip addresses or hostnames to confirm peer uniqueness is a bad idea. Peers should have a unique id derived from some entropy, preferably a possessed private key. That way multiple peers could run on the same ip address and also you\u2019d know when two peers with the same private key are present, which is presumably an error state.",
        "ts": "1477338223.000590"
    },
    {
        "type": "message",
        "user": "U2BGFAHC7",
        "text": "RE: hacking the config. I could just run this:\n<https:\/\/github.com\/OpenBlockMesh\/OBM-Fabric-GKE>\nBut the verbosity of that config is what I\u2019m trying to avoid by using petsets :slightly_smiling_face:",
        "edited": {
            "user": "U2BGFAHC7",
            "ts": "1477338304.000000"
        },
        "ts": "1477338289.000591"
    }
]