[
    {
        "type": "message",
        "user": "U0XR6J961",
        "text": "sorry guys, i got sick last night - can't concentrate or work today",
        "ts": "1473418505.000234"
    },
    {
        "type": "message",
        "user": "U1AU8DRQR",
        "text": "get well soon :slightly_smiling_face:",
        "ts": "1473418780.000235"
    },
    {
        "type": "message",
        "user": "U1GLPP8QN",
        "text": "ehm... guys... any major changes happened to consensus lately? we've put together a CC that protect against self-made \"replay attacks\" (essentially it simulates users A and B, A has a giant deck of cards, and transactions are actions where a single card is given to B). we use a heavier workload (few hundred tx\/s\/peer), and at a given time, things look like this in the pbft module:",
        "ts": "1473430641.000236"
    },
    {
        "type": "message",
        "subtype": "file_share",
        "text": "<@U1GLPP8QN|deeflorian> uploaded a file: <https:\/\/hyperledgerproject.slack.com\/files\/deeflorian\/F2A18H8TB\/-.txt|Untitled>",
        "file": {
            "id": "F2A18H8TB",
            "created": 1473430655,
            "timestamp": 1473430655,
            "name": "-.txt",
            "title": "Untitled",
            "mimetype": "text\/plain",
            "filetype": "text",
            "pretty_type": "Plain Text",
            "user": "U1GLPP8QN",
            "editable": true,
            "size": 165,
            "mode": "snippet",
            "is_external": false,
            "external_type": "",
            "is_public": true,
            "public_url_shared": false,
            "display_as_bot": false,
            "username": "",
            "url_private": "https:\/\/files.slack.com\/files-pri\/T0J024XGA-F2A18H8TB\/-.txt?t=xoxe-18002167554-139099126023-137701436192-e599afc92e",
            "url_private_download": "https:\/\/files.slack.com\/files-pri\/T0J024XGA-F2A18H8TB\/download\/-.txt?t=xoxe-18002167554-139099126023-137701436192-e599afc92e",
            "permalink": "https:\/\/hyperledgerproject.slack.com\/files\/deeflorian\/F2A18H8TB\/-.txt",
            "permalink_public": "https:\/\/slack-files.com\/T0J024XGA-F2A18H8TB-05425df999",
            "edit_link": "https:\/\/hyperledgerproject.slack.com\/files\/deeflorian\/F2A18H8TB\/-.txt\/edit",
            "preview": "    primaryID isActiveView viewNo\r\nvp0     1         false      17\r\nvp1     0         true       16\r\nvp2     0         true       16\r\nvp3     0         true       16",
            "preview_highlight": "<div class=\"CodeMirror cm-s-default CodeMirrorServer\" oncopy=\"if(event.clipboardData){event.clipboardData.setData('text\/plain',window.getSelection().toString().replace(\/\\u200b\/g,''));event.preventDefault();event.stopPropagation();}\">\n<div class=\"CodeMirror-code\">\n<div><pre>    primaryID isActiveView viewNo<\/pre><\/div>\n<div><pre>vp0     1         false      17<\/pre><\/div>\n<div><pre>vp1     0         true       16<\/pre><\/div>\n<div><pre>vp2     0         true       16<\/pre><\/div>\n<div><pre>vp3     0         true       16<\/pre><\/div>\n<\/div>\n<\/div>\n",
            "lines": 5,
            "lines_more": 0,
            "preview_is_truncated": false,
            "channels": [
                "C0Z4NBUN6"
            ],
            "groups": [],
            "ims": [],
            "comments_count": 0
        },
        "user": "U1GLPP8QN",
        "upload": true,
        "display_as_bot": false,
        "username": "<@U1GLPP8QN|deeflorian>",
        "bot_id": null,
        "ts": "1473430655.000237"
    },
    {
        "type": "message",
        "user": "U1GLPP8QN",
        "text": "after a view change:",
        "ts": "1473430664.000238"
    },
    {
        "type": "message",
        "subtype": "file_share",
        "text": "<@U1GLPP8QN|deeflorian> uploaded a file: <https:\/\/hyperledgerproject.slack.com\/files\/deeflorian\/F2A0VA1U4\/-.txt|Untitled>",
        "file": {
            "id": "F2A0VA1U4",
            "created": 1473430673,
            "timestamp": 1473430673,
            "name": "-.txt",
            "title": "Untitled",
            "mimetype": "text\/plain",
            "filetype": "text",
            "pretty_type": "Plain Text",
            "user": "U1GLPP8QN",
            "editable": true,
            "size": 165,
            "mode": "snippet",
            "is_external": false,
            "external_type": "",
            "is_public": true,
            "public_url_shared": false,
            "display_as_bot": false,
            "username": "",
            "url_private": "https:\/\/files.slack.com\/files-pri\/T0J024XGA-F2A0VA1U4\/-.txt?t=xoxe-18002167554-139099126023-137701436192-e599afc92e",
            "url_private_download": "https:\/\/files.slack.com\/files-pri\/T0J024XGA-F2A0VA1U4\/download\/-.txt?t=xoxe-18002167554-139099126023-137701436192-e599afc92e",
            "permalink": "https:\/\/hyperledgerproject.slack.com\/files\/deeflorian\/F2A0VA1U4\/-.txt",
            "permalink_public": "https:\/\/slack-files.com\/T0J024XGA-F2A0VA1U4-a5c844a422",
            "edit_link": "https:\/\/hyperledgerproject.slack.com\/files\/deeflorian\/F2A0VA1U4\/-.txt\/edit",
            "preview": "    primaryID isActiveView viewNo\r\nvp0     1         true       17\r\nvp1     2         false      18\r\nvp2     1         true       17\r\nvp3     1         true       17",
            "preview_highlight": "<div class=\"CodeMirror cm-s-default CodeMirrorServer\" oncopy=\"if(event.clipboardData){event.clipboardData.setData('text\/plain',window.getSelection().toString().replace(\/\\u200b\/g,''));event.preventDefault();event.stopPropagation();}\">\n<div class=\"CodeMirror-code\">\n<div><pre>    primaryID isActiveView viewNo<\/pre><\/div>\n<div><pre>vp0     1         true       17<\/pre><\/div>\n<div><pre>vp1     2         false      18<\/pre><\/div>\n<div><pre>vp2     1         true       17<\/pre><\/div>\n<div><pre>vp3     1         true       17<\/pre><\/div>\n<\/div>\n<\/div>\n",
            "lines": 5,
            "lines_more": 0,
            "preview_is_truncated": false,
            "channels": [
                "C0Z4NBUN6"
            ],
            "groups": [],
            "ims": [],
            "comments_count": 0
        },
        "user": "U1GLPP8QN",
        "upload": true,
        "display_as_bot": false,
        "username": "<@U1GLPP8QN|deeflorian>",
        "bot_id": null,
        "ts": "1473430674.000239"
    },
    {
        "type": "message",
        "user": "U1GLPP8QN",
        "text": "which looks like a scenario where the primary is already in the next view, but it looks like it's still performing it's tasks (small number of rejects, many transactions are written to the ledger). and this happens during the entirety of the experiment... kind of dazzled at the moment... and what's more, the CC on the core peer is dormant during the period where the other peers think it's the primary (~0% CPU usage from a CC that generates a quite heavy workload)",
        "ts": "1473430874.000240"
    },
    {
        "type": "message",
        "user": "U1GLPP8QN",
        "text": "not saying that a change _has_ happened, but this seems like a fascinating phenomenon :smile:",
        "edited": {
            "user": "U1GLPP8QN",
            "ts": "1473431009.000000"
        },
        "ts": "1473430950.000241"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "<@U1GLPP8QN> No real changes to PBFT have made it in lately.  That is pretty baffling behavior.  In general, all leader batch sends are wrapped at the very least in a check against `isActiveView`.  Would love to see some logs with PBFT debugging enabled if you are able to reproduce.",
        "ts": "1473431961.000243"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "My best guess would be that vp1 successfully sent the new view message, but the other peers were not able to process it quickly enough, leading `vp1` to view change again.  You would see some transactions processed, and then it would sit in this state until there were new outstanding transactions, which should cause another view change.  If this is the case, then I would expect that the view change timeout and perhaps request timeout should be tuned up.",
        "ts": "1473432057.000244"
    },
    {
        "type": "message",
        "user": "U1GLPP8QN",
        "text": "thanks a lot, that's reassuring and constructive :slightly_smiling_face: maybe we're just overloading the execution\/chaincode part of the system too heavily (with the CC, could go a lot higher with other CCs, just we used that with a few week old version)... based on what you said, i'd _guess_ that the outstanding queue might be too large and cause the primary to request a view change almost instantly, while the others \"catch up\" and process the sent out batches. will do a few experiments and report what's found, but this is might be too much of a Friday afternoon to explore all of the options now. this is definitely reproducible though, so I'll link the log when available",
        "ts": "1473433916.000245"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "Great, thanks <@U1GLPP8QN> !",
        "ts": "1473434088.000246"
    },
    {
        "type": "message",
        "user": "U1GLPP8QN",
        "text": "<@U0XPR4NP4> looks like this is only the result of melting down the pbft with requests :smile: didn't look at the outstanding queue size previously, but using the same stress level with a slower CC is too much. still, this means that longer CC execution times can lead to quite strange behaviour, observable in the pbft variables... interesting :slightly_smiling_face:",
        "ts": "1473437941.000247"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "<@U1GLPP8QN> Ah, yes, that could definitely have an effect.  If your executions are taking a long time, then I would recommend increasing the request timeout from the default of 2s to something like, maybe 10s.",
        "ts": "1473441103.000248"
    },
    {
        "user": "U269P9D8W",
        "text": "<@U269P9D8W|rajeshsubhankar> has joined the channel",
        "type": "message",
        "subtype": "channel_join",
        "ts": "1473486083.000249"
    }
]