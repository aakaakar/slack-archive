[
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "<@U0XQ35CDD> I think the idea here is flipped a little bit.  Gossip does not want to use this 'last config change' to validate the block. It's actually entirely the opposite.  Passing the test is more of a 'well formed we'll gossip and retain this', but if the block claims to be for a config we don't know, we can't safely gossip it, because membership may have changed.",
        "ts": "1478111355.000333"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "I don't follow.",
        "ts": "1478111400.000334"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "I'm going to the store nearby before it closes (to buy food), on the phone-slack in the meantime",
        "ts": "1478111405.000335"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "So, the problem this is intended to address, is when say you have 3 peer orgs, and one is kicked out",
        "ts": "1478111457.000336"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "It's a piece of info you cannot trust.",
        "ts": "1478111460.000337"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "It would be bad, if peer org C is kicked out at block 100, to gossip them block 101",
        "ts": "1478111481.000338"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "So, you're a peer, you've committed through block 90, and you get a gossiped block for block 101, which says \"My last config happened in block 100\"",
        "ts": "1478111521.000339"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "Now, you don't know whether it's a lie, or the truth, however, you can say that if it's the truth, you shouldn't share it with anyone, until you find out who you're authorized to share it with.",
        "ts": "1478111546.000340"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "So, if it's the truth, you don't forward the block until you commit block 100, have the new config, and know who to share it with.",
        "ts": "1478111564.000341"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "If on the other hand, it's a lie, you also don't forward it, you commit block 100, which wasn't a config tx, and you realize it was a lie, so you discard it.",
        "ts": "1478111586.000342"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "I have a simple idea",
        "ts": "1478111618.000343"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "I honestly don't follow.",
        "ts": "1478111630.000344"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "Can i store the certificate hashes of the orderers?",
        "ts": "1478111649.000345"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "Where by \"don't follow\", I mean \"I'm not sold at all on the usefulness of this.\"",
        "edited": {
            "user": "U0XQ35CDD",
            "ts": "1478111844.000000"
        },
        "ts": "1478111657.000346"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "The usefilness is latwncy",
        "ts": "1478111674.000347"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "Latency",
        "ts": "1478111677.000348"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "I know you're headed to the grocery store now, so I cannot call you out for not providing more context :simple_smile:",
        "ts": "1478111785.000349"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "But yeah, I'll need more context.",
        "ts": "1478111799.000350"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "<@U0XQ35CDD> Would you agree that the gossip should allow gossiping out of order?",
        "ts": "1478111872.000352"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "Jyellic can explain :sweat_smile: ",
        "ts": "1478111879.000353"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "You know what i mean?",
        "ts": "1478111892.000354"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "About latenxy",
        "ts": "1478111911.000355"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "I want to disseminate a block as fast as i can",
        "ts": "1478111923.000356"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "I know why you want to do that, sure.",
        "ts": "1478111940.000357"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "So if i store then locally and only send in order",
        "ts": "1478111964.000358"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "That impacts latency",
        "ts": "1478111972.000359"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "If the gossip is sending blocks out of order, then, for a given block, it's not clear who the authorized recipients are.",
        "ts": "1478111998.000360",
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U0ZJZBJLF"
                ],
                "count": 1
            }
        ]
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "(Unless all blocks prior to that one have been committed locally)",
        "ts": "1478112016.000361"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "I've yet to hear how relying on a piece of info that may be junk is a sound decision.",
        "ts": "1478112061.000362"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "So I'll pose this instead.  Gossiping peer A receives block 10, but has only committed through block 7.  What should he do?  If the answer is \"Wait until block 9 is committed\", then we have a latency problem.  Otherwise, what should the behavior be?",
        "ts": "1478112182.000363"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "Go on with the suggestion that was brought up by <@U0ZJZBJLF>.",
        "edited": {
            "user": "U0XQ35CDD",
            "ts": "1478112266.000000"
        },
        "ts": "1478112259.000364"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "Which was?",
        "ts": "1478112282.000366"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "So, I guess I'm trying to lead you to the suggestion.  But I can state it outright.",
        "ts": "1478112303.000367"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "You're asking me? Including the last config block # in the block header, right?",
        "ts": "1478112312.000368"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "And I guess I'm trying to get you to see that this technique is not sound.",
        "ts": "1478112337.000369"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "I absolutely get that it is forgable",
        "ts": "1478112354.000370"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "And I maintain that this does not matter",
        "ts": "1478112360.000371"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "Consider the forgery cases.  Someone can forge a block claiming that the configuration block is older than in reality.  Or, someone can forge a block claiming that the configuration block is newer than in reality.  Anything else?",
        "ts": "1478112402.000372"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "First of all, that's a good first step, because earlier I saw a claim that this forging cannot happen: <https:\/\/hyperledgerproject.slack.com\/archives\/fabric-crypto\/p1478110668001837>",
        "attachments": [
            {
                "from_url": "https:\/\/hyperledgerproject.slack.com\/archives\/fabric-crypto\/p1478110668001837",
                "fallback": "[November 2nd, 2016 11:17 AM] yacovm: how can you make that data block be signed?",
                "ts": "1478110668.001837",
                "author_subname": "yacovm",
                "channel_id": "C2GE7GXM1",
                "channel_name": "fabric-crypto",
                "is_msg_unfurl": true,
                "text": "how can you make that data block be signed?",
                "author_name": "Yacov Manevich",
                "author_link": "https:\/\/hyperledgerproject.slack.com\/team\/yacovm",
                "author_icon": "https:\/\/avatars.slack-edge.com\/2016-09-30\/85916865123_74ecb5d18535acea44aa_48.png",
                "mrkdwn_in": [
                    "text"
                ],
                "id": 1,
                "footer": "Posted in #fabric-crypto"
            }
        ],
        "ts": "1478112461.000373"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "As I noted on that call two weeks ago, DoS is the only concern here.",
        "ts": "1478112527.000375"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "With the caveat that all DoS fears in a permissioned network are exaggerated.",
        "ts": "1478112553.000376"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "ok I'm back",
        "ts": "1478112570.000377"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "I have an idea",
        "ts": "1478112578.000378"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "Right.  I agree that forgery is theoretically possible, however, there's a limited window for it, and since it's all attributable, less likely.",
        "ts": "1478112602.000379"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "But when you're talking gossip, you're talking scale, and you don't want to ship 999 blocks shipped to 100,000 peers w\/o reason.",
        "ts": "1478112620.000380"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "<@U0ZJZBJLF> We walked through this before, I'd like to do the same with <@U0XQ35CDD>, on the attacks",
        "ts": "1478112623.000381"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "&gt; Someone can forge a block claiming that the configuration block is older than in reality.  Or, someone can forge a block claiming that the configuration block is newer than in reality.  Anything else?",
        "ts": "1478112636.000382"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "the essence of the problem here is the following: i trust f+1 signatures, and N can grow to a level in which the number f+1 can consist of only byzantine orderers, is that correct?",
        "edited": {
            "user": "U0ZJZBJLF",
            "ts": "1478112674.000000"
        },
        "ts": "1478112666.000383"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "N- total number of orderers",
        "ts": "1478112691.000385"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "That is the attack that I have right now in mind, yes.",
        "ts": "1478112701.000386"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "ok so why not employ the following tactic:",
        "ts": "1478112711.000387"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "I \"remember\" the current last committed set of orderers",
        "ts": "1478112731.000388"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "meaning- let's say I committed up to block `i`- then I know that the orderer set now is: `S_i`",
        "ts": "1478112754.000389"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "ok?",
        "ts": "1478112755.000390"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "Yes.",
        "ts": "1478112763.000391"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "so, now I get a block with a higher number `j`&gt;`i`i",
        "ts": "1478112773.000392"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "if there is no intersection in the orderer sets",
        "edited": {
            "user": "U0ZJZBJLF",
            "ts": "1478112785.000000"
        },
        "ts": "1478112781.000393"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "I say \"hmmm... this looks suspicious!\"",
        "ts": "1478112793.000395"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "if there is an intersection",
        "ts": "1478112796.000396"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "hmm wait",
        "ts": "1478112816.000397"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "Even if there is an intersection it can be suspicious.",
        "ts": "1478112816.000398"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "no",
        "ts": "1478112818.000399"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "yeah",
        "ts": "1478112820.000400"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "because the good guys might be left out",
        "ts": "1478112825.000401"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "I think we are getting way ahead of ourselves.",
        "ts": "1478112830.000402"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "and the bad guys inside",
        "ts": "1478112830.000403"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "The simple answer is that blocks can be forged. Period.",
        "ts": "1478112888.000404"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "Bottom line is what I said on the call: this exposes you to DoS. I'm against adding this extra bit of info. You may as well gossip around based on what you have committed so far.",
        "ts": "1478112890.000405"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "Trying to heuristic our way out of that is a dead end.",
        "ts": "1478112898.000406"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "wait, but - what is actually the use case here?",
        "ts": "1478112921.000407"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "a forging that causes me to send info to someone that shouldn't get",
        "ts": "1478112931.000408"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "the orderer can do that without my help",
        "ts": "1478112938.000409"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "right?",
        "ts": "1478112972.000410"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "It's fooling the gossiping node into doing that.",
        "ts": "1478112978.000411"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "But I thought you said you were inclined to add that bit to the block header?",
        "attachments": [
            {
                "fallback": "[November 2nd, 2016 2:54 PM] jyellick: Trying to heuristic our way out of that is a dead end.",
                "ts": "1478112898.000406",
                "author_subname": "jyellick",
                "channel_id": "C2HHHJCSU",
                "channel_name": "fabric-gossip-dev",
                "is_msg_unfurl": true,
                "text": "Trying to heuristic our way out of that is a dead end.",
                "author_name": "Jason Yellick",
                "author_link": "https:\/\/hyperledgerproject.slack.com\/team\/jyellick",
                "author_icon": "https:\/\/secure.gravatar.com\/avatar\/80fccad690b283483c3b5418b8b82b5b.jpg?s=48&d=https%3A%2F%2Fa.slack-edge.com%2F272a%2Fimg%2Favatars%2Fava_0026-48.png",
                "mrkdwn_in": [
                    "text"
                ],
                "color": "D0D0D0",
                "from_url": "https:\/\/hyperledgerproject.slack.com\/archives\/fabric-gossip-dev\/p1478112898000406",
                "is_share": true,
                "footer": "Posted in #fabric-gossip-dev"
            }
        ],
        "ts": "1478113006.000412"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "If we want to allow out of order gossip, there is DoS possibility",
        "edited": {
            "user": "U0XPR4NP4",
            "ts": "1478113018.000000"
        },
        "ts": "1478113012.000413"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "because, it'll gossip garbage?",
        "ts": "1478113025.000415"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "Yes.",
        "ts": "1478113029.000416"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "only for a short period of time though, right?",
        "ts": "1478113036.000417"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "because, once I get the real blocks",
        "ts": "1478113043.000418"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "Guys, it's a hack.",
        "ts": "1478113049.000419"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "I can point my finger at the bad orderer, can't i?",
        "ts": "1478113053.000420"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "after all- signing a lie, proves that you signed a lie",
        "ts": "1478113101.000421"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "<@U1HFNJB50>  what do you think about this?",
        "ts": "1478113125.000422"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "Even if you eventually figure out what happened (which will happen), you've already gossiped garbage.",
        "ts": "1478113153.000423"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "so?",
        "ts": "1478113169.000424"
    },
    {
        "type": "message",
        "user": "U1HFNJB50",
        "text": "Need to read through your discussion ",
        "ts": "1478113214.000425"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "So if you run the risk of gossiping garbage anyway, why not gossip based on what you've already committed?",
        "ts": "1478113215.000426"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "&gt; Guys, it's a hack.\n\nI'm not sure I agree with this.  It's a happy-path optimization.  If we expected a ton of DoS garbage attacks, then I would simply say \"No out of order gossip\", but the case where there's DoS garbage is likely to be infrequent, and brief.",
        "ts": "1478113224.000427",
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U0ZJZBJLF"
                ],
                "count": 1
            }
        ]
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "I maintain that statement actually.",
        "ts": "1478113242.000428"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "because, gossiping in-order is really really slow",
        "ts": "1478113247.000429"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "I will say, there's zero requirement that it actually has to be in the block itself.  This could be metadata added by the gossip network",
        "ts": "1478113248.000430"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "the propagation of blocks is not in-order",
        "ts": "1478113275.000431"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "<@U0ZJZBJLF> I am not pointing you to the direction of gossiping in order.",
        "ts": "1478113278.000432"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "I am saying: <https:\/\/hyperledgerproject.slack.com\/archives\/fabric-gossip-dev\/p1478113215000426>",
        "attachments": [
            {
                "from_url": "https:\/\/hyperledgerproject.slack.com\/archives\/fabric-gossip-dev\/p1478113215000426",
                "fallback": "[November 2nd, 2016 12:00 PM] kostas: So if you run the risk of gossiping garbage anyway, why not gossip based on what you've already committed?",
                "ts": "1478113215.000426",
                "author_subname": "kostas",
                "channel_id": "C2HHHJCSU",
                "channel_name": "fabric-gossip-dev",
                "is_msg_unfurl": true,
                "text": "So if you run the risk of gossiping garbage anyway, why not gossip based on what you've already committed?",
                "author_name": "Kostas Christidis",
                "author_link": "https:\/\/hyperledgerproject.slack.com\/team\/kostas",
                "author_icon": "https:\/\/avatars.slack-edge.com\/2016-04-05\/31983107923_80db5353e9278df980c7_48.png",
                "mrkdwn_in": [
                    "text"
                ],
                "id": 1,
                "footer": "Posted in #fabric-gossip-dev"
            }
        ],
        "ts": "1478113285.000433"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "You commit in order",
        "ts": "1478113298.000435"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "that is called- gossiping in-order",
        "ts": "1478113300.000436"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "No.",
        "ts": "1478113317.000437"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "You decide whether you'll gossip this out of order block, based on the last config that you yourself have validated\/committed.",
        "ts": "1478113343.000438"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "Do you see the difference?",
        "ts": "1478113355.000439"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "Then you're still vulnerable to DoS",
        "ts": "1478113355.000440"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "Exactly!",
        "ts": "1478113360.000441"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "But you're not adding junk to the block.",
        "ts": "1478113368.000442"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "That's exactly my point.",
        "ts": "1478113372.000443"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "So you're slow and vulnerable to DoS",
        "ts": "1478113380.000444"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "Vs. just being vulnerable to DoS",
        "ts": "1478113385.000445"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "yes I see",
        "ts": "1478113403.000446"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "Why are you slow? You already have a config that's about as useful for future propagation as the one that you would reference in the new format.",
        "ts": "1478113425.000447"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "but wait, why isn't that also prone to an attack in this manner?",
        "ts": "1478113436.000448"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "Oh",
        "ts": "1478113438.000449"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "Yeah, you can't do that",
        "ts": "1478113441.000450"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "what if there was a config change in the meantime?",
        "ts": "1478113443.000451"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "You will gossip blocks to those who shouldn't know about it",
        "ts": "1478113449.000452"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "Sigh, we're doing circles :simple_smile:",
        "ts": "1478113453.000453"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "So you're wrong and slow and vulnerable to DoS",
        "ts": "1478113455.000454"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "So, let's assume the last config reference is not in the block.  Because there's really no reason it needs to be",
        "ts": "1478113498.000455"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "&gt; So, let's assume the last config reference is not in the block.  Because there's really no reason it needs to be",
        "ts": "1478113508.000456"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "Stop right there.",
        "ts": "1478113510.000457"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "Instead, the gossip layer attaches a \"and this was validated by this config block\"",
        "ts": "1478113512.000458"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "Everything you say after that statement is fine with me.",
        "ts": "1478113523.000459"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "wait, a question before that- how many orderers sign each block in practice?",
        "ts": "1478113527.000460"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "it's 2f+1 right?",
        "ts": "1478113533.000461"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "not f+1",
        "ts": "1478113535.000462"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "Depends on the consensus scheme",
        "ts": "1478113538.000463"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "As long as you realize that adding that last config reference in the block is useless, my job is done.",
        "ts": "1478113542.000464"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "because I need f+1 *identical*",
        "ts": "1478113542.000465"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "For Kafka, I'd expect 1",
        "ts": "1478113542.000466"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "so why not do that optimization with kafka then?",
        "ts": "1478113561.000467"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "(For context to <@U1HFNJB50>, etc., this is what causes this conversation: <https:\/\/hyperledgerproject.slack.com\/archives\/fabric-crypto\/p1478108757001743>)",
        "attachments": [
            {
                "from_url": "https:\/\/hyperledgerproject.slack.com\/archives\/fabric-crypto\/p1478108757001743",
                "fallback": "[November 2nd, 2016 10:45 AM] jyellick: While I have everyone here, something <@U0ZJZBJLF> requested, which I'm somewhat inclined to add, is to include the index of the last configuration transaction for a chain in the block header.  Because, given a block header, and a set of signatures, you need a third piece of information \"Which signatures are required\", which is embedded in the configuration transaction.  What does everyone think?",
                "ts": "1478108757.001743",
                "author_subname": "jyellick",
                "channel_id": "C2GE7GXM1",
                "channel_name": "fabric-crypto",
                "is_msg_unfurl": true,
                "text": "While I have everyone here, something <@U0ZJZBJLF> requested, which I'm somewhat inclined to add, is to include the index of the last configuration transaction for a chain in the block header.  Because, given a block header, and a set of signatures, you need a third piece of information \"Which signatures are required\", which is embedded in the configuration transaction.  What does everyone think?",
                "author_name": "Jason Yellick",
                "author_link": "https:\/\/hyperledgerproject.slack.com\/team\/jyellick",
                "author_icon": "https:\/\/secure.gravatar.com\/avatar\/80fccad690b283483c3b5418b8b82b5b.jpg?s=48&d=https%3A%2F%2Fa.slack-edge.com%2F272a%2Fimg%2Favatars%2Fava_0026-48.png",
                "mrkdwn_in": [
                    "text"
                ],
                "id": 1,
                "footer": "Posted in #fabric-crypto"
            }
        ],
        "ts": "1478113583.000468"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "<@U0XQ35CDD> I'm not saying it's useless... it's just not necessary.",
        "edited": {
            "user": "U0XPR4NP4",
            "ts": "1478113627.000000"
        },
        "ts": "1478113615.000470"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "It seemed like _maybe_ 8 bytes extra in the header was worthwhile to make people's lives easier.",
        "ts": "1478113650.000472"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "and faster",
        "ts": "1478113672.000473"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "So, for instance, when the orderer starts up, it doesn't have to scan the blockchain looking for the last config tx, it just looks at the most recent block to get the index of the last config tx",
        "ts": "1478113673.000474"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "much faster",
        "ts": "1478113675.000475"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "<@U0ZJZBJLF> You can add this as metadata yourself",
        "ts": "1478113682.000476"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "There's no need for it to actually be in the block structure",
        "ts": "1478113688.000477"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "no I can't",
        "ts": "1478113690.000478"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "I can't sign it",
        "ts": "1478113692.000479"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "Who cares? It's forgable",
        "ts": "1478113699.000480"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "hmmm",
        "ts": "1478113707.000481"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "^^ EXACTLY",
        "ts": "1478113718.000482"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "but, it may really lead to a DDOS now",
        "ts": "1478113722.000483"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "because there are lots of peers",
        "ts": "1478113728.000484"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "It could before!",
        "ts": "1478113730.000485"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "You can require that the peer who adds it signs it",
        "ts": "1478113731.000486"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "and only so much orderers",
        "ts": "1478113732.000487"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "That gives you attribution, and I really don't think the DoS is any wider",
        "ts": "1478113748.000488"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "I don't like this, it's not that I'm lazy or anything, I just think that black-listing an orderer is something an attack would really *not* want to happen, but it can spare peers if he would need",
        "edited": {
            "user": "U0ZJZBJLF",
            "ts": "1478113789.000000"
        },
        "ts": "1478113773.000489"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "The orderer already had some of its privileges removed, so it's going rogue.",
        "ts": "1478113831.000491"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "I'm a peer, I create block 110, claiming that the config in block 109 switched out all the orderers to some public keys I control, I then forge the block with real sigs and broadcast",
        "ts": "1478113833.000492"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "This is a DoS vector, that you can't detect, even requiring the last config in the signed block header",
        "ts": "1478113851.000493"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "I can detect at the end",
        "ts": "1478113866.000494"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "when I get the real block 109",
        "ts": "1478113873.000495"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "Sure, I don't think anyone is insinuating that this could cause you to commit a bad block",
        "ts": "1478113885.000496"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "Simply that having the block number in the header gives you no real additional DoS prevention",
        "ts": "1478113901.000497"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "no, i mean: the idea of preventing a DDOS should be that it will be really expensive for the attacker to perform a DDOS",
        "ts": "1478113917.000498"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "so if the attacker uses peers, and say- we have 1000 peers",
        "ts": "1478113926.000499"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "it's really cheap",
        "ts": "1478113930.000500"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "but if the attacker controls only 1 orderer, out of 3 and the peers detect that- they will black list that orderer",
        "ts": "1478113951.000501"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "Right, in that sense it's less easy to pull off.",
        "ts": "1478113953.000502"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "and it's game over",
        "ts": "1478113958.000503"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "But: \n&gt; I'm a peer, I create block 110, claiming that the config in block 109 switched out all the orderers to some public keys I control, I then forge the block with real sigs and broadcast",
        "ts": "1478113981.000504"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "If you control 1000 peers, you can have them all making up blocks and sending them",
        "ts": "1478113991.000505"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "DoS-ing the network",
        "ts": "1478113993.000506"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "I don't see how having the block number in the header mitigates any of it",
        "ts": "1478114007.000507"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "nope",
        "ts": "1478114008.000508"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "if a peer will make up a block and send to another peer",
        "ts": "1478114033.000509"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "the peer will take that block, validate it, and see it's fake, right?",
        "ts": "1478114042.000510"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "It can't validate it, because it doesn't have the config yet",
        "ts": "1478114052.000511"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "I'm talking now about the use case in which orderers sign the blocks",
        "ts": "1478114069.000512"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "If you want to gossip about blocks you can't validate, (which is any that are out of order)",
        "ts": "1478114069.000513"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "But without the full chain, you can't be sure who the orderers are",
        "ts": "1478114092.000514"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "oh you mean- a full membership change?",
        "ts": "1478114104.000515"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "Doesn't really matter if it's a full membership change or not",
        "ts": "1478114114.000516"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "no, wait- that also won't work as an attack",
        "ts": "1478114116.000517"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "I can't verify the signature of a block",
        "ts": "1478114127.000518"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "If I send you a block, and tell you the config changed, then there's no way to validate that block",
        "ts": "1478114131.000519"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "(Until you get up through where I claim the config changed)",
        "ts": "1478114144.000520"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "hmmm is it possible to maybe switch to a hangout?",
        "ts": "1478114155.000521"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "and we will post the conclusions here at the end?",
        "ts": "1478114163.000522"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "Sure.",
        "ts": "1478114171.000523"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "I prefer text, personally",
        "ts": "1478114171.000524"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "ok",
        "ts": "1478114173.000525"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "But I can do hangout if you guys would rather",
        "ts": "1478114179.000526"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "no problem, text it is",
        "ts": "1478114179.000527"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "so, I think that a full orderer change is not an attack that can work",
        "ts": "1478114209.000528"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "at all",
        "ts": "1478114211.000529"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "We're honestly doing circles, Hangouts will hopefully put an end to the confusion.",
        "ts": "1478114217.000530"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "~That's fine, I nominate <@U0XQ35CDD> to start the hangout~ I will I guess",
        "edited": {
            "user": "U0XPR4NP4",
            "ts": "1478114403.000000"
        },
        "ts": "1478114230.000531"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "wait for me, I'm booting my work laptop, this one doesn't have a mic",
        "ts": "1478114279.000532"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "<@U0YP7KFGQ>  I see you're also on, you can join too and <@U1HFNJB50> I'm just tagging you for fun",
        "edited": {
            "user": "U0ZJZBJLF",
            "ts": "1478114382.000000"
        },
        "ts": "1478114329.000533"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "yeah",
        "ts": "1478114410.000537"
    },
    {
        "text": "<@U0XPR4NP4|jyellick> has started a Google+ Hangout for this channel. <https:\/\/hangouts.google.com\/hangouts\/_\/tozjor3qlnfd5f3l2vtznlh2aae|Join Hangout>.",
        "username": "hangouts",
        "bot_id": "B0UKUAJ0Y",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1478114417.000538"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "So TLDR of hangout",
        "ts": "1478119371.000539"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "<@U0XPR4NP4>  and <@U0XQ35CDD>  will *strongly consider* each orderer to sign the sequence number of the last configuration block in the metadata of the block",
        "ts": "1478119443.000540"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "am I right? :thinking_face:",
        "ts": "1478119469.000541"
    },
    {
        "type": "message",
        "user": "U0XPR4NP4",
        "text": "That's correct",
        "ts": "1478119544.000542"
    },
    {
        "type": "message",
        "user": "U0XQ35CDD",
        "text": "That's true. ",
        "edited": {
            "user": "U0XQ35CDD",
            "ts": "1478119943.000000"
        },
        "ts": "1478119546.000543"
    },
    {
        "type": "message",
        "user": "U0ZJZBJLF",
        "text": "cool",
        "ts": "1478119552.000544"
    }
]